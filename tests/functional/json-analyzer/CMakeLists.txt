string (TOUPPER "${JSON_ANALYZER_TEST}" JSON_ANALYZER_TEST)
if (NOT "${JSON_ANALYZER_TEST}" STREQUAL "ON")
    message ("WARNING: JSON-analyzer functional test is not available. Use '-DJSON_ANALYZER_TEST=ON' param for CMake")
else ()
    set (CHECK_JSON_ANALYZER_SCRIPT "check-json-analyzer.py")
    configure_file ("${CHECK_JSON_ANALYZER_SCRIPT}.in" "${CHECK_JSON_ANALYZER_SCRIPT}")
    set (CHECK_JSON_ANALYZER_TRACE "${CMAKE_SOURCE_DIR}/traces/json-analyzer/check-json-analyzer.pcap.bz2")
    set (CHECK_JSON_ANALYZER_JSON "${CMAKE_SOURCE_DIR}/traces/json-analyzer/check-json-analyzer.pcap.json")
    add_test (NAME functional_test_json_analyzer COMMAND sudo python ${CHECK_JSON_ANALYZER_SCRIPT} ${CHECK_JSON_ANALYZER_TRACE} ${CHECK_JSON_ANALYZER_JSON})
endif ()
