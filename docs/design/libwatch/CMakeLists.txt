file (GLOB DIAGRAM_SOURCE_FILES "*.plantuml")
foreach (DIAGRAM_SOURCE_FILE ${DIAGRAM_SOURCE_FILES})
    get_filename_component (DIAGRAM_SOURCE_FILENAME ${DIAGRAM_SOURCE_FILE} NAME)
    get_filename_component (DIAGRAM_SOURCE_FILENAME_WE ${DIAGRAM_SOURCE_FILE} NAME_WE)
    set (DIAGRAM_TARGET_FILE "${CMAKE_CURRENT_SOURCE_DIR}/${DIAGRAM_SOURCE_FILENAME_WE}.png")
    set (DIAGRAM_TARGET documentation-design-libwatch-${DIAGRAM_SOURCE_FILENAME})
    add_custom_command(OUTPUT ${DIAGRAM_TARGET_FILE}
        COMMAND ${JAVA_PATH} -jar ${PLANTUML_JAR_PATH} -verbose ${DIAGRAM_SOURCE_FILENAME}
        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
        DEPENDS ${DIAGRAM_SOURCE_FILE})
    set_source_files_properties (${DIAGRAM_TARGET_FILE} PROPERTIES GENERATED 1)
    add_custom_target (${DIAGRAM_TARGET} SOURCES ${DIAGRAM_TARGET_FILE})
    add_dependencies (documentation-design ${DIAGRAM_TARGET})
    add_dependencies (${DIAGRAM_TARGET} ${DOWNLOAD_PLANTUML_JAR_PROXY_TARGET})
endforeach ()
